<% include ../../partials/head/full %>
<section class='mb-2'>
	<nav class='navbar navbar-expand navbar-light bg-nav'>
		<ul class='navbar-nav mr-auto'>
			<li class='nav-item'>
				<a class='nav-link stores_nav' href='/stores'>Stores</a>
			</li>
			<li class='nav-item'>
				<a class='nav-link stores_nav' href='/stores/demands'>Demands</a>
			</li>
		</ul>
	</nav>
</section>
<section class='container'>
	<div class="input-group mb-2">
		<div class="input-group-prepend w-20">
			<label class="input-group-text w-100" for="sel_supplier">Suppliers</label>
		</div>
		<select class="custom-select" id='sel_supplier' onchange=getDemands()>
			<option value='-1' selected>All</option>
			<% suppliers.forEach(supplier => { %>
				<option value='<%= supplier.supplier_id %>'>
					<%= supplier._name %>
				</option>
			<% }); %>
		</select>
	</div>
	<div class="input-group mb-2">
		<div class="input-group-prepend w-20">
			<label class="input-group-text w-100" for="sel_complete">Completed Demands</label>
		</div>
		<select class="custom-select" id='sel_complete' onchange=getDemands()>
			<option value='1' selected>Include</option>
			<option value='2'>Exclude</option>
			<option value='3'>Only</option>
		</select>
	</div>
	<div class="input-group mb-2">
		<div class="input-group-prepend w-20">
			<label class="input-group-text w-100" for="sel_closed">Closed Demands</label>
		</div>
		<select class="custom-select" id='sel_closed' onchange=getDemands()>
			<option value='1'>Include</option>
			<option value='2' selected>Exclude</option>
			<option value='3'>Only</option>
		</select>
	</div>
	<div id='spn_demands' class="spinner-border text-primary" role="status">
		<span class="sr-only">Loading...</span>
	</div>
	<table class="table table-sm table-hover">
		<thead class="thead-dark">
			<th class="w-25" onclick="sortTable(0, 'demandTable')">Supplier</th>
			<th class="w-20" onclick="sortTable(1, 'demandTable')">Date</th>
			<th class="w-25" onclick="sortTable(2, 'demandTable')">Raised By</th>
			<th class="w-10" onclick="sortTable(3, 'demandTable')">Lines</th>
			<th class="w-10" onclick="sortTable(4, 'demandTable')">Complete</th>
			<th class="w-10" onclick="sortTable(5, 'demandTable')">Closed</th>
			<th><i class="fas fa-search"></i></th>
		</thead>
		<tbody id="demandTable">
		</tbody>
	</table>
</section>
<% include ../../partials/foot/full %>
<script src="/js/get/demands.js"></script>
<script async>getDemands()</script>
<% include ../../partials/foot/htmlClose %>