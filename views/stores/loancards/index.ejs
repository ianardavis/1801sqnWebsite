<%- include(`${partials}/head/app`, {text: 'Stores'}) %>
<%- include(`${partials}/breadcrumb`, {text: 'Loancards'}) %>
<%- include(`${partials}/reload`) %>
<%- include(`${partials}/spinner`, {id: 'loancards'}) %>
<%- include(`${partials}/head/components/close`) %>
<section class='container'>
	<div class="row mb-1">
		<div class="col-12 col-md-6">
			<button class="col-12 col-lg-6 btn btn-primary w-100" type="button" data-bs-toggle="collapse" data-bs-target="#col-filter" aria-expanded="false" aria-controls="col-filter">
				Filter
			</button>
		</div>
		<div class="col-12 col-md-6">
			<button class="col-12 col-lg-6 btn btn-success w-100" type="button" data-bs-toggle="modal"    data-bs-target="#mdl_loancard_open">
				View Loancard
			</button>
		</div>
	</div>
	<div class="collapse mb-2" id="col-filter">
		<%- include(`${partials}/inputs/select`, {title: 'Filter By User', id: 'sel_users', spinner_id: 'users', reload_id: 'reload_users'}) %>
		<h5 class='text-start'>Status:</h5>
		<div class="row">
			<div class="col-6 col-sm-6">
				<%- include(`${partials}/inputs/checkbox`, {title: 'Cancelled', id: 'status_0', value: '0', colour: 'secondary', classes: ['status']}) %>
			</div>
			<div class="col-6 col-sm-6">
				<%- include(`${partials}/inputs/checkbox`, {title: 'Draft', 	id: 'status_1', value: '1', colour: 'warning', 	classes: ['status'], checked: true}) %>
			</div>
			<div class="col-6 col-sm-6">
				<%- include(`${partials}/inputs/checkbox`, {title: 'Complete', 	id: 'status_2', value: '2', colour: 'success', 	classes: ['status']}) %>
			</div>
			<div class="col-6 col-sm-6">
				<%- include(`${partials}/inputs/checkbox`, {title: 'Closed', 	id: 'status_3', value: '3', colour: 'primary', 	classes: ['status']}) %>
			</div>
		</div>
		<div class="row">
			<div class="col-sm-6">
				<h5 class='text-start'>Date From:</h5>
				<input type="date" class='form-control' id='createdAt_from'>
			</div>
			<div class="col-sm-6">
				<h5 class='text-start'>Date To:</h5>
				<input type="date" class='form-control' id='createdAt_to'>
			</div>
		</div>
	</div>
	<%- include(`${partials}/filter/sort`, {table: 'loancards'}) %>
	<table class="table table-sm table-hover">
		<thead class="thead-dark">
			<th class='w-35'>Date</th>
			<th class='w-35'>User</th>
			<th class='w-15'>Lines</th>
			<th class='w-15'>Status</th>
			<th><i class="fas fa-search"></i></th>
		</thead>
		<tbody id="tbl_loancards"></tbody>
	</table>
	<%- include(`${partials}/limit`, {table: 'loancards'}) %>
	<div id="div_modals">
		<div id='mdl_loancard_open' class="modal fade" tabindex="-1" role="dialog">
			<div class="modal-dialog modal-lg" role="document">
				<div class="modal-content">
					<div class="modal-header">
						<h5 class="modal-title">View Loancard</h5>
					</div>
					<div class="modal-body">
						<%- include(`${partials}/inputs/text`, {id: 'goto_loancard_id', title: 'Loancard ID', onkeydown: 'GoToEnter(this)'}) %>
						<div id="reader" width="600px"></div>
					</div>
					<div class="modal-footer"></div>
				</div>
			</div>
		</div>
	</div>
</section>
<%- include(`${partials}/foot/app`) %>
<script src="/lib/js/html5-qrcode.min.js" type="text/javascript"></script>
<script src='/js/stores/loancards/index/view.js'></script>
<script src='/js/utils/list/users.js'></script>
<%- include(`${partials}/foot/components/htmlClose`) %>