<%- include(`${partials}/head/app`) %>
<%- include(`${partials}/breadcrumb`, {text: 'Stores', href: '/stores'}) %>
<%- include(`${partials}/breadcrumb`, {text: 'Suppliers'}) %>
<% if (permissions.supplier_add) { %>
	<li class="nav-item">
		<a class='nav-link' data-toggle="modal" data-target="#mdl_supplier_add"><i class="fas fa-plus"></i></a>
	</li>
<% } %>
<%- include(`${partials}/reload`) %>
<%- include(`${partials}/spinner`, {id: 'suppliers'}) %>
<%- include(`${partials}/head/navbar/close`) %>
<section class="container">
	<input class='form-control mt-1' type='text' id='supplierSearch' onkeyup='searchCards(this)' placeholder='Search by name...'>
	<div class='menu row' id="suppliers"></div>
	<div id="div_modals">
		<% if (permissions.supplier_add) { %>
			<div id='mdl_supplier_add' class="modal fade" tabindex="-1" role="dialog">
				<div class="modal-dialog" role="document">
					<form class="modal-content" id='form_supplier_add'>
						<div class="modal-header">
							<h5 class="modal-title">Add Supplier</h5>
						</div>
						<div class="modal-body">
							<%- include(`${partials}/inputs/text`,          {title: 'Supplier Name', name: 'supplier[name]',       maxLength: 20,  placeholder: 'Required', required: true}) %>
							<%- include(`${partials}/inputs/select`,        {title: 'Account',   	 name: 'supplier[account_id]', id: 'sel_accounts', spinner_id: 'accounts', reload_id: 'reload_accounts'}) %>
							<%- include(`${partials}/inputs/select_yes_no`, {title: 'RAF Stores?',   name: 'supplier[is_stores]',  selected: 0}) %>
							</div>
						<div class="modal-footer">
							<input type="submit" class="btn btn-success w-100" value='Save Item'>
							<button type="button" class="btn btn-danger" data-dismiss="modal">Close</button>
						</div>
					</form>
				</div>
			</div>
		<% } %>
	</div>
</section>
<%- include(`${partials}/foot/app`) %>
<script src='/js/addFormListener.js'></script>
<script src='/js/search/cards.js'></script>
<script src='/js/stores/suppliers/index/getSuppliers.js'></script>
<% if (permissions.access_sizes) { %>
	<script src='/js/stores/suppliers/index/getCounts.js'></script>
<% } %>
<% if (permissions.access_settings) { %>
	<script src='/js/stores/suppliers/index/getDefault.js'></script>
<% } %>
<% if (permissions.supplier_add) { %>
	<script src='/js/utils/list/accounts.js'></script>
	<script src='/js/stores/suppliers/index/add.js'></script>
<% } %>
<script async>getSuppliers()</script>
<%- include(`${partials}/foot/elements/htmlClose`) %>