<%- include(`${process.env.PARTIALS}/head/full`) %>
<section class="mb-2">
	<nav class="navbar navbar-expand navbar-light bg-nav">
		<ul class="navbar-nav mr-auto">
            <%- include(`${process.env.PARTIALS}/breadcrumb`, {href: '/stores',		  	 text: 'Stores'}) %>
            <%- include(`${process.env.PARTIALS}/breadcrumb`, {href: '/stores/requests', text: 'Requests'}) %>
			<%- include(`${process.env.PARTIALS}/breadcrumb`, {text: '<i class="fas fa-redo"></i>', id: 'reload'}) %>
		</ul>
	</nav>
</section>
<div class="container">
	<%- include(`${process.env.PARTIALS}/inputs/select`, {title: 'Completed Requests', id: 'sel_complete', options: [{value: '', text: 'Include'}, {value: '_complete=0', text: 'Exclude'}, {value: '_complete=1', text: 'Only', selected: true}]}) %>
	<%- include(`${process.env.PARTIALS}/inputs/select`, {title: 'Closed Requests',    id: 'sel_closed',   options: [{value: '', text: 'Include'}, {value: '_closed=0', text: 'Exclude', selected: true}, {value: '_closed=1', text: 'Only'}]}) %>
	<table class="table table-sm table-hover w-100">
		<thead class="thead-dark">
			<th class="w-35" onclick="sortTable(0, 'requestTable')"><%- include(`${process.env.PARTIALS}/spinner`, {id: 'requests', spinner_sm: true, spinner_float_left: true}) %>For</th>
			<th class="w-35" onclick="sortTable(1, 'requestTable')">Date</th>
			<th class="w-10" onclick="sortTable(2, 'requestTable')">Lines</th>
			<th class="w-10">Complete</th>
			<th class="w-10">Closed</th>
			<th><i class='fas fa-search'></i></th>
		</thead>
		<tbody id="requestTable">
		</tbody>
	</table>
</div>
<%- include(`${process.env.PARTIALS}/foot/full`) %>
<script src='/js/requests/index/requests.js'></script>
<script src='/js/spinner.js'></script>
<script src='/js/get.js'></script>
<script src='/js/data/XHRsend.js'></script>
<script src='/js/data/send.js'></script>
<script>
	let sel_complete = document.querySelector('#sel_complete'),
		sel_closed	 = document.querySelector('#sel_closed');
	getRequests = () => get(showRequests, {table: 'requests', query: [sel_complete.value, sel_closed.value]});
</script>
<script async>getRequests()</script>
<script>document.querySelector('#reload').addEventListener('click', () => getRequests());</script>	
<script>document.querySelector('#sel_complete').addEventListener('click', () => getRequests());</script>	
<script>document.querySelector('#sel_closed').addEventListener('click', () => getRequests());</script>	
<%- include(`${process.env.PARTIALS}/foot/htmlClose`) %>