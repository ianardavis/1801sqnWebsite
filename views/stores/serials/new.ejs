<%- include(`${process.env.PARTIALS}/head/head`) %>
<body>
<%- include(`${process.env.PARTIALS}/head/flash`) %>
<section id='body'>
    <form id='serialForm'>
        <input type="hidden" name="serial[size_id]" value="<%= itemsize.size_id %>">
        <%- include(`${process.env.PARTIALS}/spinner`, {id: 'serials'}) %>
		<%- include(`${process.env.PARTIALS}/inputs/text`, {id: '_serial',   name: 'serial[_serial]', title: 'Serial #', maxlength: 20, required: true}) %>
        <%- include(`${process.env.PARTIALS}/spinner`, {id: 'locations'}) %>
        <%- include(`${process.env.PARTIALS}/inputs/text`, {id: '_location', name: '_location',       title: 'Location', maxlength: 20, required: true, list: true}) %>
        <%- include('../../partials/save_cancel') %>
	</form>
<%- include(`${process.env.PARTIALS}/foot/noNav`) %>
<script src='/js/data/addFormListener.js'></script>
<script src='/js/data/send.js'></script>
<script src='/js/data/XHRsend.js'></script>
<script src='/js/get.js'></script>
<script src='/js/spinner.js'></script>
<script src='/js/getLocations.js'></script>
<script async>get(getLocations, {table: 'locations', query: []})</script>
<script>
    window.addEventListener( "load", function () {
        addFormListener(
            'serialForm',
            'POST',
            '/stores/serials',
            {
                onComplete: window.opener.get,
                args: [window.opener.showSerials, {table: 'serials', query: [`size_id=<%= itemsize.size_id %>`]}],
                // _close: true
            }
        );
    });
</script>
<%- include(`${process.env.PARTIALS}/foot/htmlClose`) %>
