<%- include(`${process.env.PARTIALS}/head/head`) %>
<body>
<%- include(`${process.env.PARTIALS}/head/flash`) %>
<section id='body' class='my-3'>
    <form id='passwordForm'>
        <input type="hidden" name="user[_reset]", value="0">
        <%- include(`${process.env.PARTIALS}/inputs/display`, {id: '_bader',    title: 'Bader #'}) %>
        <%- include(`${process.env.PARTIALS}/inputs/display`, {id: 'rank',      title: 'Rank'}) %>
        <%- include(`${process.env.PARTIALS}/inputs/display`, {id: '_name',     title: 'Name'}) %>
        <%- include(`${process.env.PARTIALS}/inputs/display`, {id: '_ini',      title: 'Initials'}) %>
        <%- include(`${process.env.PARTIALS}/inputs/display`, {id: '_login_id', title: 'Login ID'}) %>
        <h5>Enter Password</h5>
        <%- include(`${process.env.PARTIALS}/inputs/text`,    {id: '_password', title: 'Password', name: '_password', placeholder: 'Required', minLength: 8,  required: true, type: 'password'}) %>
        <%- include(`${process.env.PARTIALS}/inputs/text`,    {id: '_confirm',  title: 'Confirm Password',            placeholder: 'Required', minLength: 8,  required: true, type: 'password'}) %>
        <p>Password must include:</p>
        <ul class="list-group mb-3">
            <li class="list-group-item d-flex p-1 justify-content-between align-items-center">
                At least 8 characters
                <span id='pwd_length' class="badge badge-danger badge-pill"><i class="fas fa-times"></i></span>
            </li>
            <li class="list-group-item d-flex p-1 justify-content-between align-items-center">
                A number
                <span id='pwd_number' class="badge badge-danger badge-pill"><i class="fas fa-times"></i></span>
            </li>
            <li class="list-group-item d-flex p-1 justify-content-between align-items-center">
                An upper case letter
                <span id='pwd_upper' class="badge badge-danger badge-pill"><i class="fas fa-times"></i></span>
            </li>
            <li class="list-group-item d-flex p-1 justify-content-between align-items-center">
                A lower case letter
                <span id='pwd_lower' class="badge badge-danger badge-pill"><i class="fas fa-times"></i></span>
            </li>
            <li class="list-group-item d-flex p-1 justify-content-between align-items-center">
                A special character ( ! ? @ # $ Â£ % ^ & * )
                <span id='pwd_special' class="badge badge-danger badge-pill"><i class="fas fa-times"></i></span>
            </li>
        </ul>
        <%- include(`${process.env.PARTIALS}/save_cancel`) %>
    </form>
<%- include(`${process.env.PARTIALS}/foot/noNav`) %>
<script src="/js/users/password/check.js"></script>
<script src="/js/data/addFormListener.js"></script>
<script src="/js/data/XHRsend.js"></script>
<script src="/js/get.js"></script>
<script src="/js/spinner.js"></script>
<script src='/js/users/password/user.js'></script>
<script>getUser = () => get(showUser, {table: 'users', query: [`user_id=${path[3]}`]})</script>
<script async>
    getUser();
    pwd_compare();
</script>
<script>
    window.addEventListener( "load", () => {
        addFormListener(
            'passwordForm',
            'PUT',
            `/stores/password/<%= user_id %>`,
            {
                onComplete: window.opener.getUser,
                _close: true
            }
        );
    });
    document.querySelector('#_password').addEventListener("keyup", () => pwd_check());
    document.querySelector('#_password').addEventListener('keyup', () => pwd_compare());
    document.querySelector('#_confirm').addEventListener('keyup', () => pwd_compare());
</script>
<%- include(`${process.env.PARTIALS}/foot/htmlClose`) %>
