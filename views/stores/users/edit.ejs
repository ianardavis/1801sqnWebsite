<%- include('../../partials/head/head') %>
<body>
<%- include('../../partials/head/flash') %>
<section id='body'>
<section class="container">
    <form id='userForm'>
        <div class="input-group mb-1">
            <div class="input-group-prepend w-30">
                <span class="input-group-text w-100">Bader #</span>
            </div>
            <input class='form-control' id='_bader' name='user[_bader]' type='text' value='<%= user._bader %>' required>
        </div>
        <div class="input-group mb-1">
            <div class="input-group-prepend w-30">
                <span class="input-group-text w-100">Rank</span>
            </div>
            <select class='form-control' name='user[rank_id]' type='text'>
                <% classes.ranks.forEach(rank => { %>
                    <option value='<%= rank.rank_id %>' <% if (user.rank_id === rank.rank_id) { %> selected <% } %>><%= rank._rank %></option>
                <% }) %>
            </select>
        </div>
        <div class="input-group mb-1">
            <div class="input-group-prepend w-30">
                <span class="input-group-text w-100">Name</span>
            </div>
            <input class='form-control' name='user[_name]' type='text' value='<%= user._name %>' required>
        </div>
        <div class="input-group mb-1">
            <div class="input-group-prepend w-30">
                <span class="input-group-text w-100">Initials</span>
            </div>
            <input class='form-control' name='user[_ini]' type='text' value='<%= user._ini %>'>
        </div>
        <div class="input-group mb-1">
            <div class="input-group-prepend w-30">
                <span class="input-group-text w-100">Status</span>
            </div>
            <select class='form-control' name='user[status_id]' type='text' >
                <% classes.statuses.forEach(status => { %>
                    <option value='<%= status.status_id %>' <% if (user.status_id === status.status_id) { %> selected <% } %>><%= status._status %></option>
                <% }) %>
            </select>
        </div>
        <div class="input-group mb-1">
            <div class="input-group-prepend w-30">
                <span class="input-group-text w-100">Login ID</span>
            </div>
            <input class='form-control' id='_login_id' name='user[_login_id]' type='text' value='<%= user._login_id %>' required>
        </div>
        <input class='btn btn-primary w-100 confirm' type="submit" value='Save'>
        <a class='float-left' href='javascript:close()'>Cancel</a>
    </form>
</section>
<% include ../../partials/foot/noNav %>
<script src='/js/loginBaderMirror.js'></script>
<script>
    let form = document.querySelector("#userForm");
    form.addEventListener("submit", function (event) {
        event.preventDefault();
        sendData(form, 'PUT', '/stores/users/<%= user.user_id %>');
    });
</script>
<% include ../../partials/foot/htmlClose %>
