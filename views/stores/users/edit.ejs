<!-- CADET NEW PAGE -->
<% include ../../partials/header %>
<% include ../../partials/nav %>
<% include ../../partials/bodyTop %>
<section class='container page_title'>
    <a href='/stores'><h2>Stores Management</h2></a>
    <h3>Edit User: <%= user._rank %> <%= user._ini %> <%= user._name %></h3>
</section>
<section class='container-fluid p-5 bordered'>
    <form action='/stores/users/<%= user.user_id %>?_method=PUT' method='POST'>
        <input type='hidden' name='failRedirect', value='/stores/users/<%= user.user_id %>' readonly>
        <div class='form-group row'>
            <div class='col-sm-2'>
                <label class='col-form-label' for='_bader'>Bader #:</label>
            </div>
            <div class='col-sm-10'>
                <input class='form-control' id='_bader' name='user[_bader]' type='text' value='<%= user._bader %>'>
            </div>
        </div>
        <div class='form-group row'>
            <div class='col-sm-2'>
                <label class='col-form-label' for='_name'>Rank:</label>
            </div>
            <div class='col-sm-10'>
                <select id='_rank' class='form-control' name='user[_rank]' type='text'>
                    <% classes.ranks.forEach((rank) => { %>
                        <% if(user._rank === rank) { %>
                            <option value='<%= rank.rank_id %>'selected><%= rank._rank %></option>
                        <% } else { %>
                            <option value='<%= rank.rank_id %>'><%= rank._rank %></option>
                        <% } %>                     
                    <% }) %>
                </select>
            </div>
        </div>
        <div class='form-group row'>
            <div class='col-sm-2'>
                <label class='col-form-label' for='_name'>Name:</label>
            </div>
            <div class='col-sm-10'>
                <input class='form-control' id='_name' name='user[_name]' type='text' value='<%= user._name %>'>
            </div>
        </div>
        <div class='form-group row'>
            <div class='col-sm-2'>
                <label class='col-form-label' for='_name'>Initials:</label>
            </div>
            <div class='col-sm-10'>
                <input class='form-control' id='_ini' name='user[_ini]' type='text' value='<%= user._ini %>'>
            </div>
        </div>
        <div class='form-group row'>
            <div class='col-sm-2'>
                <label class='col-form-label' for='_gender'>Gender:</label>
            </div>
            <div class='col-sm-10'>
                <select id='genderSel' class='form-control' name='user[_gender]' type='text'>
                    <% classes.genders.forEach((gender) => { %>
                        <% if(user._gender === gender) { %>
                            <option value='<%= gender.gender_id %>'selected><%= gender._gender %></option>
                        <% } else { %>
                            <option value='<%= gender.gender_id %>'><%= gender._gender %></option>
                        <% } %>
                    <% }) %>
                </select>
            </div>
        </div>
        <div class='form-group row'>
            <div class='col-sm-2'>
                <label class='col-form-label' for='_status'>Status:</label>
            </div>
            <div class='col-sm-10'>
                <select id='statusSel' class='form-control' name='user[_status]' type='text' >
                    <% classes.statuses.forEach((status) => { %>
                        <% if (status.status_id !== 4) { %> 
                            <% if(user._status === status) { %>
                                <option value='<%= status._status_id %>'selected><%= status._status %></option>
                            <% } else { %>
                                <option value='<%= status._status_id %>'><%= status._status %></option>
                            <% } %>
                        <% } %>
                    <% }) %>
                </select>
            </div>
        </div>
        <div class='form-group row'>
            <div class='col-sm-2'>
                <label class='col-form-label' for='_login_id'>Login ID:</label>
            </div>
            <div class='col-sm-10'>
                <input class='form-control' id='_login_id' name='user[_login_id]' type='text' value='<%= user._login_id %>'>
            </div>
        </div>
        <div class='form-group row'>
            <div class='col-sm-2'>
                <label class='col-form-label' for='_reset'>Change at Next Login:</label>
            </div>
            <div class='col-sm-10'>
                <input class='form-control' id="_reset" name='user[_reset]' value='1' type='checkbox'>
            </div>
        </div>
        <div class='form-group row'>
            <button class='btn btn-primary btn-lg col-12' type='submit' id='_submit' disabled>Save</button>
        </div>
        <div class='form-group row'>
            <a href='/stores/users/<%= user.user_id %>'>Cancel</a>
        </div>
    </form>
</section>
<% include ../../partials/bodyBottom %>
<% include ../../partials/footer %>
<% include ../../partials/footjs %>
<script src='/js/loginBaderMirror.js'></script>
<script src='/js/editUserFieldCheck.js'></script>
<script>
    document.querySelector('#_reset').checked = (Boolean(<%= user._reset %>));
    checkFilled();
</script>
<% include ../../partials/htmlBottom %>
