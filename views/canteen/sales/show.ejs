<%- include(`${partials}/head/app`, {text: 'Canteen'}) %>
<%- include(`${partials}/breadcrumb`, {href: '/sales', text: 'Sales'}) %>
<%- include(`${partials}/breadcrumb`) %>
<%- include(`${partials}/reload`) %>
<%- include(`${partials}/head/components/close`) %>
<section class='container'>
    <ul class="nav nav-tabs" id="mainTab" role="tablist">
        <%- include(`${partials}/tab_head`, {id: 'details',  title: 'Details',  spinner: 'sale'}) %>
        <%- include(`${partials}/tab_head`, {id: 'lines',    title: 'Lines',    spinner: 'sale_lines', count_id: 'line'}) %>
        <%- include(`${partials}/tab_head`, {id: 'payments', title: 'Payments', spinner: 'payments',   count_id: 'payment'}) %>
    </ul>
    <div class="tab-content pt-3" id="myTabContent">
        <div class="tab-pane fade" id="details" role="tabpanel" aria-labelledby="details-tab">
            <%- include(`${partials}/inputs/display`, {id: 'sale_createdAt', title: 'Date'}) %>
            <%- include(`${partials}/inputs/display`, {id: 'sale_user',      title: 'User'}) %>
            <%- include(`${partials}/inputs/display`, {id: 'sale_status',    title: 'Status'}) %>
        </div>
        <div class="tab-pane fade" id="lines" role="tabpanel" aria-labelledby="lines-tab">
            <%- include(`${partials}/filter/sort`, {table: 'sale_lines'}) %>
	        <table class="table table-sm table-hover">
                <thead class="thead-dark">
					<th class='w-35'>Date/Time</th>
					<th class='w-25'>Item</th>
					<th class='w-10'>Qty</th>
					<th class='w-15'>Price</th>
					<th class='w-15'>Total</th>
                    <th><i class='fas fa-search'></i></th>
                </thead>
                <tbody id="tbl_lines"></tbody>
            </table>
            <%- include(`${partials}/limit`, {table: 'sale_lines'}) %>
        </div>
        <div class="tab-pane fade" id="payments" role="tabpanel" aria-labelledby="payments-tab">
            <%- include(`${partials}/filter/sort`, {table: 'payments'}) %>
	        <table class="table table-sm table-hover">
                <thead class="thead-dark">
					<th class='w-40'>Date/Time</th>
					<th class='w-15'>Amount</th>
					<th class='w-15'>Method</th>
					<th class='w-30'>User</th>
                    <th><i class='fas fa-search'></i></th>
                </thead>
                <tbody id="tbl_payments"></tbody>
            </table>
            <%- include(`${partials}/limit`, {table: 'payments'}) %>
        </div>
    </div>
</section>
<%- include(`${partials}/foot/app`) %>
<script>show_tab('<%= tab %>');</script>
<script src='/js/canteen/sales/show/view.js'></script>
<script async>getSale()</script>
<script src='/js/canteen/sales/show/lines/view.js'></script>
<script async>getSaleLines()</script>
<script src='/js/canteen/sales/show/payments/view.js'></script>
<script async>getPayments()</script>
<%- include(`${partials}/foot/components/htmlClose`) %>